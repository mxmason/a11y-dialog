/*! a11y-dialog 7.5.0 — © Kitty Giraudel */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).A11yDialog=t()}(this,(function(){"use strict";var e=['a[href]:not([tabindex^="-"])','area[href]:not([tabindex^="-"])','input:not([type="hidden"]):not([type="radio"]):not([disabled]):not([tabindex^="-"])','input[type="radio"]:not([disabled]):not([tabindex^="-"])','select:not([disabled]):not([tabindex^="-"])','textarea:not([disabled]):not([tabindex^="-"])','button:not([disabled]):not([tabindex^="-"])','iframe:not([tabindex^="-"])','audio[controls]:not([tabindex^="-"])','video[controls]:not([tabindex^="-"])','[contenteditable]:not([tabindex^="-"])','[tabindex]:not([tabindex^="-"])'];class t{$el;id;listeners={};openers=[];closers=[];previouslyFocused=null;shown=!1;constructor(e){this.$el=e,this.id=this.$el.getAttribute("data-a11y-dialog")||this.$el.id,this.create()}create=()=>(this.$el.setAttribute("aria-hidden","true"),this.$el.setAttribute("aria-modal","true"),this.$el.setAttribute("tabindex","-1"),this.$el.hasAttribute("role")||this.$el.setAttribute("role","dialog"),this.openers=i('[data-a11y-dialog-show="'+this.id+'"]'),this.openers.forEach((e=>{e.addEventListener("click",this.show)})),this.closers=i("[data-a11y-dialog-hide]",this.$el).concat(i('[data-a11y-dialog-hide="'+this.id+'"]')),this.closers.forEach((e=>{e.addEventListener("click",this.hide)})),this.fire("create"),this);destroy=()=>(this.hide(),this.openers.forEach((e=>{e.removeEventListener("click",this.show)})),this.closers.forEach((e=>{e.removeEventListener("click",this.hide)})),this.fire("destroy"),this.listeners={},this);show=e=>(this.shown||(this.previouslyFocused=document.activeElement,this.$el.removeAttribute("aria-hidden"),this.shown=!0,s(this.$el),document.body.addEventListener("focus",this.maintainFocus,!0),document.addEventListener("keydown",this.bindKeypress),this.fire("show",e)),this);hide=e=>this.shown?(this.shown=!1,this.$el.setAttribute("aria-hidden","true"),this.previouslyFocused&&this.previouslyFocused.focus&&this.previouslyFocused.focus(),document.body.removeEventListener("focus",this.maintainFocus,!0),document.removeEventListener("keydown",this.bindKeypress),this.fire("hide",e),this):this;on=(e,t)=>(void 0===this.listeners[e]&&(this.listeners[e]=[]),this.listeners[e].push(t),this);off=(e,t)=>{const i=(this.listeners[e]||[]).indexOf(t);return i>-1&&this.listeners[e].splice(i,1),this};fire=(e,t)=>{const i=this.listeners[e]||[],s=new CustomEvent(e,{detail:t});this.$el.dispatchEvent(s),i.forEach((e=>{e(this.$el,t)}))};bindKeypress=t=>{this.$el.contains(document.activeElement)&&(this.shown&&"Escape"===t.key&&"alertdialog"!==this.$el.getAttribute("role")&&(t.preventDefault(),this.hide(t)),this.shown&&"Tab"===t.key&&function(t,s){const n=function(t){return i(e.join(","),t).filter((function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}))}(t),o=n.indexOf(document.activeElement);s.shiftKey&&0===o?(n[n.length-1].focus(),s.preventDefault()):s.shiftKey||o!==n.length-1||(n[0].focus(),s.preventDefault())}(this.$el,t))};maintainFocus=e=>{if(this.shown){const t=e.target;t.closest('[aria-modal="true"]')||t.closest("[data-a11y-dialog-ignore-focus-trap]")||s(this.$el)}}}function i(e,t=document){return Array.prototype.slice.call(t.querySelectorAll(e))}function s(e){(e.querySelector("[autofocus]")||e).focus()}function n(){i("[data-a11y-dialog]").forEach((function(e){new t(e)}))}return"undefined"!=typeof document&&("loading"===document.readyState?document.addEventListener("DOMContentLoaded",n):window.requestAnimationFrame?window.requestAnimationFrame(n):window.setTimeout(n,16)),t}));
