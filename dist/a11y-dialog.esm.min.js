/*! a11y-dialog 7.5.0 — © Kitty Giraudel */
var t=['a[href]:not([tabindex^="-"])','area[href]:not([tabindex^="-"])','input:not([type="hidden"]):not([type="radio"]):not([disabled]):not([tabindex^="-"])','input[type="radio"]:not([disabled]):not([tabindex^="-"])','select:not([disabled]):not([tabindex^="-"])','textarea:not([disabled]):not([tabindex^="-"])','button:not([disabled]):not([tabindex^="-"])','iframe:not([tabindex^="-"])','audio[controls]:not([tabindex^="-"])','video[controls]:not([tabindex^="-"])','[contenteditable]:not([tabindex^="-"])','[tabindex]:not([tabindex^="-"])'];class e{$el;id;listeners={};openers=[];closers=[];previouslyFocused=null;shown=!1;constructor(t){this.$el=t,this.id=this.$el.getAttribute("data-a11y-dialog")||this.$el.id,this.create()}create=()=>(console.log("create",this.$el),this.$el.setAttribute("aria-hidden","true"),this.$el.setAttribute("aria-modal","true"),this.$el.setAttribute("tabindex","-1"),this.$el.hasAttribute("role")||this.$el.setAttribute("role","dialog"),this.openers=i('[data-a11y-dialog-show="'+this.id+'"]'),this.openers.forEach((t=>{t.addEventListener("click",this.show)})),this.closers=i("[data-a11y-dialog-hide]",this.$el).concat(i('[data-a11y-dialog-hide="'+this.id+'"]')),this.closers.forEach((t=>{t.addEventListener("click",this.hide)})),this.fire("create"),this);destroy=()=>(this.hide(),this.openers.forEach((t=>{t.removeEventListener("click",this.show)})),this.closers.forEach((t=>{t.removeEventListener("click",this.hide)})),this.fire("destroy"),this.listeners={},this);hide=t=>this.shown?(this.shown=!1,this.$el.setAttribute("aria-hidden","true"),this.previouslyFocused&&this.previouslyFocused.focus&&this.previouslyFocused.focus(),document.body.removeEventListener("focus",this.maintainFocus,!0),document.removeEventListener("keydown",this.bindKeypress),this.fire("hide",t),this):this;show=t=>(this.shown||(this.previouslyFocused=document.activeElement,this.$el.removeAttribute("aria-hidden"),this.shown=!0,s(this.$el),document.body.addEventListener("focus",this.maintainFocus,!0),document.addEventListener("keydown",this.bindKeypress),this.fire("show",t)),this);on=(t,e)=>(void 0===this.listeners[t]&&(this.listeners[t]=[]),this.listeners[t].push(e),this);off=(t,e)=>{const i=(this.listeners[t]||[]).indexOf(e);return i>-1&&this.listeners[t].splice(i,1),this};fire=(t,e)=>{const i=this.listeners[t]||[],s=new CustomEvent(t,{detail:e});this.$el.dispatchEvent(s),i.forEach((t=>{t(this.$el,e)}))};bindKeypress=e=>{this.$el.contains(document.activeElement)&&(this.shown&&"Escape"===e.key&&"alertdialog"!==this.$el.getAttribute("role")&&(e.preventDefault(),this.hide(e)),this.shown&&"Tab"===e.key&&function(e,s){const n=function(e){return i(t.join(","),e).filter((function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)}))}(e),o=n.indexOf(document.activeElement);s.shiftKey&&0===o?(n[n.length-1].focus(),s.preventDefault()):s.shiftKey||o!==n.length-1||(n[0].focus(),s.preventDefault())}(this.$el,e))};maintainFocus=t=>{if(this.shown){const e=t.target;e.closest('[aria-modal="true"]')||e.closest("[data-a11y-dialog-ignore-focus-trap]")||s(this.$el)}}}function i(t,e=document){return Array.prototype.slice.call(e.querySelectorAll(t))}function s(t){(t.querySelector("[autofocus]")||t).focus()}function n(){i("[data-a11y-dialog]").forEach((function(t){new e(t)}))}"undefined"!=typeof document&&("loading"===document.readyState?document.addEventListener("DOMContentLoaded",n):window.requestAnimationFrame?window.requestAnimationFrame(n):window.setTimeout(n,16));export{e as default};
